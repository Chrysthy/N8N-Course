? Verificando mais funÃ§Ãµes

ğŸ”¹ ManipulaÃ§Ã£o de Objetos

FunÃ§Ãµes para lidar com estruturas de dados (JSON) dentro do n8n:

- Object.keys() â†’ retorna as chaves (nomes dos campos) do objeto.
- Object.values() â†’ retorna apenas os valores contidos no objeto.
- Object.entries() â†’ retorna pares chave/valor.
- delete obj.key â†’ remove uma propriedade especÃ­fica de um objeto.
- Spread ({ ...obj }) â†’ clona ou mescla objetos (muito Ãºtil para juntar dados de dois nÃ³s).

ğŸ”¹ Datas (com Date)

ManipulaÃ§Ã£o de tempo usando o JavaScript nativo (Standard JS):

- new Date() â†’ cria a data e hora atual.
- toISOString() â†’ converte a data para o formato padrÃ£o ISO (yyyy-MM-ddTHH:mm:ssZ), que Ã© o formato preferido por bancos de dados e APIs.
- getFullYear(), getMonth(), getDate() â†’ extrai partes especÃ­ficas da data (Ano, MÃªs, Dia).
- getHours(), getMinutes(), getSeconds() â†’ extrai partes especÃ­ficas do horÃ¡rio.
- date.getTime() â†’ retorna o "Timestamp" (o tempo em milissegundos), Ãºtil para operaÃ§Ãµes matemÃ¡ticas.
- DiferenÃ§a entre datas: FÃ³rmula para calcular dias entre duas datas: (d2 - d1) / (1000 * 60 * 60 * 24).

! Dica extra: No n8n, para formatar datas de forma amigÃ¡vel, use a funÃ§Ã£o toDateTime().format('dd/MM/yyyy') ou toDateTime().format('dd/MM/yyyy HH:mm:ss') para incluir horas.

! Dica de Ouro para n8n: Embora essas funÃ§Ãµes nativas de Date funcionem perfeitamente, o n8n tambÃ©m possui uma biblioteca chamada Luxon integrada ($now, $today) que facilita muito trabalhar com Timezones (fusos horÃ¡rios), algo que o Date nativo do JS Ã s vezes complica.


ğŸ”¹ Utilidades Gerais (JavaScript)

Ferramentas essenciais para converter tipos de dados e fazer contas:

- JSON.stringify() â†’ converte um Objeto (pacote de dados) em Texto (String JSON). Muito usado quando uma API exige que vocÃª envie o corpo da mensagem como texto puro.

- JSON.parse() â†’ faz o contrÃ¡rio: pega um Texto que parece JSON e converte em Objeto real para o n8n conseguir ler.

- Math.floor() / Math.ceil() / Math.round() â†’ funÃ§Ãµes de arredondamento (para baixo, para cima e para o mais prÃ³ximo, respectivamente).

- Math.random() â†’ gera um nÃºmero aleatÃ³rio (muito Ãºtil para criar IDs Ãºnicos ou sortear itens).

- parseInt() / parseFloat() â†’ converte texto em nÃºmero (ex: transforma o texto "50.5" no nÃºmero 50.5 para vocÃª poder somar).

- Operador TernÃ¡rio (cond ? valor1 : valor2) â†’ O famoso "If de uma linha" que vimos antes.

ğŸ”¹ FunÃ§Ãµes EspecÃ­ficas do n8n

Comandos que vocÃª usa especificamente dentro do nÃ³ Code (antigo Function Node) ou nas expressÃµes:

- items.map(item => ...) â†’ tÃ©cnica para editar vÃ¡rios itens de uma vez (manipulaÃ§Ã£o em lote).

- return [{ json: { chave: valor } }] â†’ a estrutura obrigatÃ³ria para devolver dados num nÃ³ de CÃ³digo. O n8n exige que os dados estejam sempre dentro de um objeto json.

- item.json.campo â†’ a forma de acessar um dado especÃ­fico que veio do nÃ³ anterior dentro de um loop.

- {{ $json["campo"] }} â†’ a sintaxe padrÃ£o que vocÃª usa nas caixinhas visuais (Expression Editor) para puxar uma variÃ¡vel.